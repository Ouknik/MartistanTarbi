import{r as i,P as F,q as T,y as L,o,d as n,a as e,t as c,u as a,h as q,z as E,g as y,i as M,j as w,A as D,F as C,f as x,e as V,v as J,B as P,b as R,J as G,C as H,D as K}from"./app-e263ac0f.js";import{i as A}from"./index.min-40c7dc60.js";import Q from"./CreateMedicament-668a0d1a.js";import{_ as W}from"./_plugin-vue_export-helper-c27b6911.js";const l=m=>(H("data-v-70c8f403"),m=m(),K(),m),X={class:"modal fade bd-OrdonnanceAdd-modal-lg",tabindex:"88",role:"dialog",style:{display:"none"},id:"AddOrdonnance","aria-hidden":"true"},Y={class:"modal-dialog modal-lg"},Z={class:"modal-content"},ee={class:"modal-header bg-secondary"},te=l(()=>e("h5",{class:"modal-title text-white"},"Créer Ordonnance ",-1)),se={hidden:""},oe={hidden:""},ne=l(()=>e("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[e("span",{"aria-hidden":"true"},"×")],-1)),ae={class:"modal-body p-5"},ie={class:"row"},le={class:"col-lg-6"},de={class:"form-group"},ce=l(()=>e("label",{for:"medicament"},"Recherche Médicament : ",-1)),re={key:0,class:"liste-medicaments"},ue=["onClick"],me={key:1},_e={key:0,type:"button",class:"btn btn-outline-primary mb-3","data-toggle":"modal","data-target":"#AddMedicament"},pe=l(()=>e("i",{class:"ri-add-fill"},null,-1)),he={key:1,class:"col-lg-6"},ve=l(()=>e("label",{class:"prescription"}," Prescriptions",-1)),ge=l(()=>e("option",{value:"",disabled:""},"Sélectionnez une prescription",-1)),be=["value"],fe=l(()=>e("div",null,null,-1)),ye={key:0},Me={class:"row mt-2"},Ce={class:"col-lg-11"},ke={style:{"font-weight":"bold"}},xe=["onClick"],Se=l(()=>e("i",{class:"ion-trash-b text-danger"},null,-1)),we={class:"row p-0",style:{"margin-top":"-15px"}},De={class:"col-lg-11"},Ve=["onUpdate:modelValue"],Ae={class:"col-lg-1"},Oe={class:"custom-control custom-checkbox mt-2"},Ue=["onUpdate:modelValue","id"],Ne=["for"],je={class:"modal-footer"},ze=l(()=>e("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal"}," Annuler ",-1)),Be=["disabled"],Ie={__name:"CreateOrdonnances",props:{medicaments:Object,idConsultation:Number,patient:Number},setup(m){const O=i([]),U=i(""),N=i("");let d=i(""),_=i([]),p=i(null),k=i([]),u=i(null),r=i([]);const h=m;let S=i(h.medicaments);const g=F({medicaments:r,idConsultation:"",patient:""});T(()=>{S.value=h.medicaments});const j=()=>{if(h.idConsultation==0)return A.useToast().error("Veuillez Choisir Une Consultation",{position:"bottom-right",duration:3e3}),!1;G.visit("/ordonnances",{method:"post",data:g,preserveState:!0,preserveScroll:!0,errorBag:null,forceFormData:!0,onSuccess:s=>{A.useToast().success("Ordonnance Ajouter",{position:"bottom-right",duration:3e3}),$("#AddOrdonnance").modal("hide"),r.value=[]}})},z=()=>{_.value=d.value?S.value.filter(s=>s.nomMedicament.toLowerCase().includes(d.value.toLowerCase())):[]},B=s=>{p.value=s,k.value=s.prescriptions||[],d.value="",_.value=[],k.value.length===0&&r.value.push({medicament_id:s.id,nomMedicament:s.nomMedicament,dosageMedicament:s.dosageMedicament,uniteDosageMedicament:s.uniteDosageMedicament,prescription:" ",isChecked:""})};L(u,s=>{s&&(r.value.push({...s,nomMedicament:p.value.nomMedicament,dosageMedicament:p.value.dosageMedicament,uniteDosageMedicament:p.value.uniteDosageMedicament}),u.value=null)});const I=s=>{r.value.splice(s,1)};return(s,b)=>(o(),n(C,null,[e("div",X,[e("div",Y,[e("div",Z,[e("div",ee,[te,e("span",se,c(a(g).idConsultation=h.idConsultation),1),e("span",oe,c(a(g).patient=h.patient),1),ne]),e("div",ae,[e("form",{onSubmit:q(j,["prevent"])},[e("div",ie,[O.value?(o(),n("label",{key:0,style:E(N.value)},c(U.value),5)):y("",!0),e("div",le,[e("div",de,[ce,M(e("input",{type:"text",class:"form-control",id:"email1",onInput:z,"onUpdate:modelValue":b[0]||(b[0]=t=>D(d)?d.value=t:d=t)},null,544),[[w,a(d)]])]),a(_).length>0?(o(),n("ul",re,[(o(!0),n(C,null,x(a(_),t=>(o(),n("li",{key:t.id,onClick:v=>B(t)},c(t.nomMedicament),9,ue))),128))])):(o(),n("ul",me,[a(_).length===0&&a(d).length>0?(o(),n("button",_e,[pe,V(" Ajouter Médicament ")])):y("",!0)]))]),a(p)?(o(),n("div",he,[ve,M(e("select",{class:"form-control my-2","onUpdate:modelValue":b[1]||(b[1]=t=>D(u)?u.value=t:u=t)},[ge,(o(!0),n(C,null,x(a(k),t=>(o(),n("option",{key:t.id,value:t},c(t.prescription),9,be))),128))],512),[[J,a(u)]])])):y("",!0)]),fe,a(r).length?(o(),n("div",ye,[(o(!0),n(C,null,x(a(r),(t,v)=>(o(),n("div",{key:v},[e("div",Me,[e("div",Ce,[e("h5",ke,[e("a",{onClick:f=>I(v),class:"iq-icons-list",href:"#"},[Se,V(c(t.nomMedicament)+" "+c(t.dosageMedicament)+" "+c(t.uniteDosageMedicament),1)],8,xe)])])]),e("div",we,[e("div",De,[M(e("input",{type:"text",class:"form-control ml-3","onUpdate:modelValue":f=>t.prescription=f},null,8,Ve),[[w,t.prescription,void 0,{lazy:!0}]])]),e("div",Ae,[e("div",Oe,[M(e("input",{"onUpdate:modelValue":f=>t.isChecked=f,type:"checkbox",class:"custom-control-input",id:"customCheck-"+v,checked:!1},null,8,Ue),[[P,t.isChecked]]),e("label",{class:"custom-control-label",for:"customCheck-"+v},null,8,Ne)])])])]))),128))])):y("",!0),e("div",je,[ze,e("button",{type:"submit",disabled:a(g).processing,class:"btn btn-primary"}," Ajouter ",8,Be)])],32)])])])]),R(Q)],64))}},Ee=W(Ie,[["__scopeId","data-v-70c8f403"]]);export{Ee as default};
