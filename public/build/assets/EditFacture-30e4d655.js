import{r,P as E,y as h,p as M,o as c,d as u,a as e,b as A,w as f,e as S,t as m,u as d,F as D,f as C,i as p,j as _,g as I,J as T,C as U,D as j}from"./app-e263ac0f.js";import{i as B}from"./index.min-40c7dc60.js";import{D as N}from"./vue3-easy-data-table.es-1512132d.js";import{_ as O}from"./_plugin-vue_export-helper-c27b6911.js";const i=s=>(U("data-v-67de850a"),s=s(),j(),s),P={class:"modal fade bd-EditFacture-modal-lg",id:"updateFacture",tabindex:"-1",role:"dialog",style:{display:"none"},"aria-hidden":"true"},J={class:"modal-dialog modal-lg"},q={class:"modal-content"},z=i(()=>e("div",{class:"modal-header bg-secondary"},[e("h5",{class:"modal-title text-white"}," Modifier Facture "),e("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[e("span",{"aria-hidden":"true"},"Ã—")])],-1)),L={key:0,class:"modal-body"},G={class:"mb-4"},H=i(()=>e("i",{class:"ri-calendar-2-line"},null,-1)),K={class:"mb-4"},Q=i(()=>e("i",{class:"ri-contacts-book-line"},null,-1)),R={class:"row"},W=["onUpdate:modelValue"],X={class:"col-lg-12 mt-4"},Y={class:"row"},Z={class:"form-group col-md-6 col-lg-6"},ee=i(()=>e("label",{for:"validationSoin04"},"Montant Total",-1)),te={class:"form-group col-md-6 col-lg-6",hidden:""},oe=i(()=>e("label",{for:"validationSoin04"},"Montant a Payer",-1)),ae={class:"modal-footer"},se=i(()=>e("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal"},"Annuler",-1)),le={__name:"EditFacture",props:{patient:Object,facture:Object,soins:Object},setup(s){const l=r([]),y=r(["libelleSoin","montantSoin"]),g=r(""),v=s,x=[{text:"Soin",value:"libelleSoin",sortable:!0},{text:"Montant",value:"montantSoin",sortable:!0}],n=E({total:0,montantApayer:"",soins:l}),b=r(Array.isArray(v.soins)?v.soins.map(a=>({...a,selected:!1})):[]);h(l,a=>{b.value.forEach(t=>{a.includes(t)?t.selected=!0:t.selected=!1})});const F=M(()=>l.value.reduce((a,t)=>a+parseInt(t.montantSoin),0));h(F,a=>{n.total=a});const w=a=>{T.visit(`/factures/${a.id}`,{method:"put",data:n,preserveState:!0,preserveScroll:!0,errorBag:null,forceFormData:!1,preserveState:!0,preserveScroll:!0,onSuccess:t=>{B.useToast().success("Patient Modifier",{position:"bottom-right",duration:3e3}),$("#updateFacture").modal("hide")}})};return(a,t)=>(c(),u("div",P,[e("div",J,[e("div",q,[z,s.facture?(c(),u("div",L,[A(d(N),{items:b.value,headers:x,search:g.value,fields:y.value,"items-selected":l.value,"onUpdate:itemsSelected":t[0]||(t[0]=o=>l.value=o),"select-all":!1,"table-class-name":"customize-table",alternating:""},{"header-libelleSoin":f(o=>[e("div",G,[H,S(" "+m(o.text),1)])]),"header-montantSoin":f(o=>[e("div",K,[Q,S(" "+m(o.text),1)])]),_:1},8,["items","search","fields","items-selected"]),e("div",R,[(c(!0),u(D,null,C(l.value,(o,V)=>(c(),u("div",{class:"col-lg-4 mt-3",key:V},[e("label",null,m(o.libelleSoin),1),p(e("input",{type:"text",class:"form-control","onUpdate:modelValue":k=>o.montantSoin=k,id:"validationSoin02",disabled:""},null,8,W),[[_,o.montantSoin]])]))),128))]),e("div",X,[e("div",Y,[e("div",Z,[ee,p(e("input",{type:"text",class:"form-control col-md-12 text-white",id:"validationSoin04","onUpdate:modelValue":t[1]||(t[1]=o=>d(n).total=o),disabled:"",required:"",style:{"background-color":"#089bab","font-weight":"600"}},null,512),[[_,d(n).total]])]),e("div",te,[oe,p(e("input",{type:"text",class:"form-control col-md-12",id:"validationSoin04","onUpdate:modelValue":t[2]||(t[2]=o=>d(n).montantApayer=o)},null,512),[[_,d(n).montantApayer]])])])])])):I("",!0),e("div",ae,[se,e("button",{type:"submit",onClick:t[3]||(t[3]=o=>w(a.$props.facture)),class:"btn btn-danger"},"Modifier")])])])]))}},ce=O(le,[["__scopeId","data-v-67de850a"]]);export{ce as default};
