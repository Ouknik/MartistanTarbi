import{r as c,P as x,o as u,d as m,a as e,h as w,i as k,j as S,t as _,g as h,e as M,k as N,J as I}from"./app-e263ac0f.js";import{i as b}from"./index.min-40c7dc60.js";const B={class:"modal fade",id:"Gestationnel",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel",style:{display:"none"},"aria-hidden":"true"},V={class:"modal-dialog",role:"document"},q={class:"modal-content"},E=e("div",{class:"modal-header bg-secondary"},[e("h5",{class:"modal-title text-white",id:"exampleModalLabel"}," Suivi de grossesse, Matérnité "),e("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[e("span",{"aria-hidden":"true"},"×")])],-1),G={class:"modal-body"},T={class:"iq-card iq-card-block iq-card-stretch iq-card-height"},A={class:"iq-card-body"},j={class:"iq-timeline"},C=e("div",{class:"timeline-dots-fill"},null,-1),F=e("h6",{class:"float-left mb-2 text-dark"},[e("i",{class:"ri-user-fill"}),M(" Dernières règles ")],-1),J=e("small",{class:"float-right mt-1"},null,-1),R={class:"d-inline-block w-100"},z={key:0,style:{"font-weight":"bold",color:"black","margin-right":"20px"}},L={key:1,style:{"font-weight":"bold",color:"black"}},P=N('<li><div class="timeline-dots-fill bg-success"></div><h6 class="float-left mb-2 text-dark"><i class="ri-heart-fill bg-color-red"></i> Grossesse </h6><small class="float-right mt-1"></small><div class="d-inline-block w-100"><input disabled type="date" class="form-control" id="exampleInputdate2"></div></li><li><div class="timeline-dots-fill bg-info"></div><h6 class="float-left mb-2 text-dark"><i class="ri-user-fill"></i> Accouchement </h6><small class="float-right mt-1"></small><div class="d-inline-block w-100"><input disabled type="date" class="form-control" value="" id="exampleInputdate3"></div></li>',2),O={class:"modal-footer"},U=e("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal"}," Fermer ",-1),W={key:0,type:"submit",class:"btn btn-primary"},K={__name:"AgeGestationnelle",props:{patient:Object},setup(f){const g=f,p=c(new Date),n=c(0),r=c(0),v=c(new Date);function y(){v.value=new Date;const t=new Date(p.value),o=Math.abs(v.value-t),l=Math.ceil(o/(1e3*60*60*24)),s=new Date(t);s.setDate(s.getDate()+14),document.getElementById("exampleInputdate2").value=i(s),a.dateGrosesse=i(s);const d=new Date(s);d.setDate(d.getDate()+(40*7-14)),document.getElementById("exampleInputdate3").value=i(d),a.dateAccouchement=i(d),a.dateDernierRegle=i(t),n.value=Math.floor(l/7),r.value=l%7}function i(t){const o=t.getFullYear(),l=String(t.getMonth()+1).padStart(2,"0"),s=String(t.getDate()).padStart(2,"0");return`${o}-${l}-${s}`}const a=x({dateDernierRegle:"",dateGrosesse:"",dateAccouchement:"",patient:""}),D=()=>{if(!a.dateDernierRegle){b.useToast().error("Veuillez saisir la date de Dernières règles",{position:"bottom-right",duration:3e3});return}a.patient=g.patient?g.patient.id:null,I.visit("/gestationnelles",{method:"post",data:a,preserveState:!0,preserveScroll:!0,errorBag:null,forceFormData:!1,onProgress:t=>{},onSuccess:t=>{b.useToast().success(" Bien Ajouté",{position:"bottom-right",duration:3e3}),$("#Gestationnel").modal("hide")},onError:t=>{b.useToast().error("Veuillez remplir tout les champs",{position:"bottom-right",duration:3e3})}})};return(t,o)=>(u(),m("div",B,[e("div",V,[e("div",q,[E,e("form",{onSubmit:w(D,["prevent"])},[e("div",G,[e("div",T,[e("div",A,[e("ul",j,[e("li",null,[C,F,J,e("div",R,[k(e("input",{type:"date",onChange:y,class:"form-control","onUpdate:modelValue":o[0]||(o[0]=l=>p.value=l),id:"exampleInputdate",max:""},null,544),[[S,p.value]]),n.value!=null&&!isNaN(n.value)?(u(),m("span",z,_(n.value)+" Semaine(s)",1)):h("",!0),r.value!=null&&!isNaN(r.value)?(u(),m("span",L,_(r.value)+" Jour(s)",1)):h("",!0)])]),P])])])]),e("div",O,[U,t.$page.props.patient?(u(),m("button",W," Enregistrer ")):h("",!0)])],32)])])]))}};export{K as default};
