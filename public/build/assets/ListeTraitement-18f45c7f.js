import{r as q,o as a,d as r,F as m,f as b,a as e,t as u,A as M,e as g,i as c,j as p,v as f,b as j,u as V,k,J as h}from"./app-e263ac0f.js";import N from"./AddMedicament-7ce1e7b1.js";import{i as n}from"./index.min-40c7dc60.js";import"./vue-multiselect.esm-816d2b1c.js";const C=e("div",{class:"text-right pr-3"},[e("button",{type:"button",class:"btn btn-outline-primary mb-3","data-toggle":"modal","data-target":"#AddTraitement"},[e("i",{class:"ri-add-fill"}),g(" Traitement ")])],-1),D=e("div",null,null,-1),$={class:"iq-unread"},J={class:"d-flex align-self-center"},U={class:"iq-email-sender-info"},P=e("div",{class:"iq-checkbox-mail"},null,-1),B={href:"javascript: void(0);",class:"iq-email-title"},w={class:"iq-email-content"},A={href:"javascript: void(0);",class:"iq-email-subject"},L=e("div",{class:"iq-email-date"},null,-1),R={class:"iq-social-media"},E=["onClick"],F=e("i",{class:"ri-delete-bin-2-line"},null,-1),O=[F],z=e("li",null,[e("a",{href:"#"},[e("i",{class:"ri-edit-line"})])],-1),I={class:"email-app-details"},G={class:"iq-card"},H={class:"iq-card-body p-0"},K={class:""},Q=k('<div class="iq-email-to-list p-3"><div class="d-flex justify-content-between"><ul><li class="mr-3"><a href="javascript: void(0);"><h4 class="m-0"><i class="ri-arrow-left-line"></i></h4></a></li></ul></div></div><hr class="mt-0">',2),W={class:"iq-inbox-subject p-3"},X={class:"row"},Y={class:"col-sm-12"},Z={class:"iq-card"},ee={class:"iq-card-body"},te={id:"table",class:"table-editable"},se={class:"d-flex align-items-center mb-4"},oe=e("label",{for:"subject",class:"mr-2 mt-1"},"Nom traitement ",-1),ie=["value"],le=["onClick"],ne=e("i",{class:"ri-add-fill"},null,-1),ae={class:"table table-bordered table-responsive-md table-striped text-center"},re=e("thead",null,[e("tr",null,[e("th",null,"Médicament"),e("th",null,"Dosage"),e("th",null,"La Dose"),e("th",null,"x Par J"),e("th",null,"Moment de Prise"),e("th",{colspan:"2"},"Durée"),e("th",null,"Modifier"),e("th",null,"Supprimer")])],-1),ce={contenteditable:"false"},de={contenteditable:"false"},ue={contenteditable:"true"},_e=["onUpdate:modelValue"],me={contenteditable:"false"},pe=["onUpdate:modelValue"],he={contenteditable:"false"},ve=["onUpdate:modelValue"],be=e("option",{value:"Avant Repas"},"Avant Repas",-1),fe=e("option",{value:"Milieu Repas"},"Milieu Repas",-1),ge=e("option",{value:"Aprés Repas"},"Aprés Repas",-1),xe=[be,fe,ge],Se={contenteditable:"false"},ye=["onUpdate:modelValue"],Te=["onUpdate:modelValue"],qe=e("option",{value:"Jours"},"Jours",-1),Me=e("option",{value:"Semaines"},"Semaines",-1),je=e("option",{value:"Mois"},"Mois",-1),Ve=[qe,Me,je],ke=["onClick"],Ne=e("i",{class:"ri-edit-2-fill"},null,-1),Ce=[Ne],De=["onClick"],$e=e("i",{class:"ri-delete-bin-3-fill"},null,-1),Je=[$e],Ae={__name:"ListeTraitement",props:{medicaments:Object,traitements:Object},setup(v){let d=q({});const x=(s,l)=>{const o=JSON.stringify(l);T(l)&&h.put(`/traitement/${s}/medicament/${o}`,{preserveState:!0,preserveScroll:!0,onSuccess:t=>{},onError:t=>{n.useToast().error("Erreur lors de la mise à jour : "+t.message,{position:"bottom-right",duration:3e3})}})},S=s=>{h.delete(`/traitements/${s.id}`,{preserveState:!0,preserveScroll:!0,errorBag:null,forceFormData:!1,preserveState:!0,preserveScroll:!0,onSuccess:l=>{n.useToast().success("Traitement Bien Supprimer",{position:"bottom-right",duration:3e3})}})},y=(s,l)=>{h.delete(`/traitement/${s}/medicament/${l}`,{preserveState:!0,preserveScroll:!0,errorBag:null,forceFormData:!1,preserveState:!0,preserveScroll:!0,onSuccess:o=>{n.useToast().success("Medicament Bien Supprimer",{position:"bottom-right",duration:3e3})}})},T=s=>!s.NombreComprime||!s.quantiteParJour||!s.momentDePrise||!s.duree||!s.dureeNombre?(n.useToast().error("Veuillez remplir tous les champs obligatoires",{position:"bottom-right",duration:3e3}),!1):!_(s.NombreComprime)||!_(s.quantiteParJour)||!_(s.dureeNombre)?(n.useToast().error("Les champs doivent contenir uniquement des chiffres",{position:"bottom-right",duration:3e3}),!1):(n.useToast().success("Medicament Bien Modifiée ",{position:"bottom-right",duration:3e3}),!0),_=s=>/^[0-9]+$/.test(s);return(s,l)=>(a(),r(m,null,[C,(a(!0),r(m,null,b(v.traitements,o=>(a(),r("ul",{key:o.id,class:"iq-email-sender-list"},[D,e("li",$,[e("div",J,[e("div",U,[P,e("a",B,u(o.nomTraitement),1)]),e("div",w,[e("a",A,u(o.dureeTraitement),1),L]),e("ul",R,[e("li",null,[e("a",{onClick:t=>S(o)},O,8,E)]),z])])]),e("div",I,[e("div",G,[e("div",H,[e("div",K,[Q,e("div",W,[e("div",X,[e("div",Y,[e("div",Z,[e("div",ee,[e("div",te,[e("div",se,[oe,e("input",{type:"text",id:"subject",disabled:"",class:"form-control col-md-6",value:o.nomTraitement},null,8,ie),e("button",{type:"button",class:"btn btn-outline-primary ml-4",onClick:t=>M(d)?d.value=o:d=o,"data-toggle":"modal","data-target":"#AddMedicamentsTraitement"},[ne,g(" Modifier Le Traitement ")],8,le)]),e("table",ae,[re,e("tbody",null,[(a(!0),r(m,null,b(o.medicaments,t=>(a(),r("tr",{key:t.id},[e("td",ce,u(t.nomMedicament),1),e("td",de,u(t.dosageMedicament+" "+t.uniteDosageMedicament),1),e("td",ue,[c(e("input",{type:"text",style:{width:"60px"},id:"subject",class:"form-control","onUpdate:modelValue":i=>t.pivot.NombreComprime=i},null,8,_e),[[p,t.pivot.NombreComprime]])]),e("td",me,[c(e("input",{type:"text",style:{width:"60px"},id:"subject",class:"form-control","onUpdate:modelValue":i=>t.pivot.quantiteParJour=i},null,8,pe),[[p,t.pivot.quantiteParJour]])]),e("td",he,[c(e("select",{class:"form-control form-control-md","onUpdate:modelValue":i=>t.pivot.momentDePrise=i},xe,8,ve),[[f,t.pivot.momentDePrise]])]),e("td",Se,[c(e("input",{type:"text",style:{width:"60px"},id:"subject",class:"form-control","onUpdate:modelValue":i=>t.pivot.dureeNombre=i},null,8,ye),[[p,t.pivot.dureeNombre]])]),e("td",null,[c(e("select",{class:"form-control form-control-md","onUpdate:modelValue":i=>t.pivot.duree=i},Ve,8,Te),[[f,t.pivot.duree]])]),e("td",null,[e("button",{type:"button",onClick:i=>x(o.id,t.pivot),class:"btn btn-outline-success mb-1 mt-3"},Ce,8,ke)]),e("td",null,[e("button",{type:"button",onClick:i=>y(o.id,t.pivot.medicament_id),class:"btn btn-outline-danger mb-1 mt-3"},Je,8,De)])]))),128))])])])])])])])])])])])])]))),128)),j(N,{medicaments:v.medicaments,traitement:V(d)},null,8,["medicaments","traitement"])],64))}};export{Ae as default};
