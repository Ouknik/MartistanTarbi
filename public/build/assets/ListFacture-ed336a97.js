import{o as n,d as o,a as e,F as c,f as u,t as l,g as p,n as d,b as h,J as g}from"./app-e263ac0f.js";import{P as _}from"./main-ed727b8e.js";import b from"./ViewFacture-80c20340.js";import m from"./EditFacture-30e4d655.js";import"./FooterDocteur-aa572583.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./print-b31df52a.js";import"./index.min-40c7dc60.js";import"./vue3-easy-data-table.es-1512132d.js";const P={class:"tab-pane fade show active",id:"pills-factures-fill",role:"tabpanel","aria-labelledby":"pills-factures-tab-fill"},v={class:"row"},f={class:"col-sm-12"},F={class:"iq-card"},k={class:"iq-card-body"},y={id:"table",class:"table-editable"},C={class:"table-responsive"},S={class:"table table-bordered table-responsive-md table-striped text-center"},$=e("thead",null,[e("tr",null,[e("th",null,"N°"),e("th",null,"Date"),e("th",null,"Détails Soin"),e("th",null,"Montant Total"),e("th",null,"Modifier"),e("th",null,"Aperçu & Impression")])],-1),N={key:0},M={contenteditable:"false"},O={contenteditable:"false"},j={class:"mt-3"},w={style:{"list-style":"square","text-align":"left"}},B={contenteditable:"false"},D={key:0},J=["onClick"],L=e("i",{class:"ri-edit-line"},null,-1),q=[L],E={key:1},V=e("i",{style:{"font-size":"30px"},class:"ri-close-line text-danger"},null,-1),z=[V],T=["onClick"],A=e("i",{class:"ri-eye-line"},null,-1),H=[A],I={class:"d-flex justify-content-center"},G={key:0,"aria-label":"Factures pagination"},K={class:"pagination"},Q=["disabled"],R=e("span",{"aria-hidden":"true"},"«",-1),U=e("span",{class:"sr-only"},"First",-1),W=[R,U],X=["disabled"],Y=e("span",{"aria-hidden":"true"},"‹",-1),Z=e("span",{class:"sr-only"},"Previous",-1),x=[Y,Z],ee=["onClick","disabled"],te=["disabled"],se=e("span",{"aria-hidden":"true"},"›",-1),ae=e("span",{class:"sr-only"},"Next",-1),ne=[se,ae],oe=["disabled"],ie=e("span",{"aria-hidden":"true"},"»",-1),le=e("span",{class:"sr-only"},"Last",-1),re=[ie,le],de={components:{FactureModal:b,Pagination:_},props:["data","errors"],data(){return{selectedFacture:null,perPage:10,currentPage:1}},computed:{soins(){return JSON.parse(this.factures[0].soins)},paginatedFactures(){const a=(this.currentPage-1)*this.perPage,t=a+this.perPage;return this.factures.slice(a,t)},totalPages(){return Math.ceil(this.factures.length/this.perPage)}},methods:{changePage(a){this.currentPage=a},getFactures(){g.get("/Factures",data.factures,{preserveState:!0,preserveScroll:!0})},showFactureModal(a){this.selectedFacture=a},deleteFacture(a){g.delete(`/factures/${a.id}`,{preserveState:!0,preserveScroll:!0,onSuccess:t=>{useToast().success("Bien Supprimer",{position:"bottom-right",duration:3e3})}})}}},ve=Object.assign(de,{__name:"ListFacture",props:{factures:Object,patient:Object,configuration:Object,soinsF:Object},setup(a){return(t,i)=>(n(),o("div",P,[e("div",v,[e("div",f,[e("div",F,[e("div",k,[e("div",y,[e("div",C,[e("table",S,[$,(n(!0),o(c,null,u(t.paginatedFactures,s=>(n(),o("tbody",{key:s.id},[s.soins!=null?(n(),o("tr",N,[e("td",M,l(s.id),1),e("td",O,l(s.dateFacture),1),e("td",null,[e("ol",j,[(n(!0),o(c,null,u(JSON.parse(s.soins),r=>(n(),o("li",w,l(r.libelleSoin)+" - "+l(r.montantSoin)+" DH ",1))),256))])]),e("td",B,l(s.montantFacture),1),t.$page.props.user.type=="docteur"?(n(),o("td",D,[e("button",{type:"button",onClick:r=>t.showFactureModal(s),"data-toggle":"modal","data-target":".bd-EditFacture-modal-lg",class:"btn btn-outline-success mb-1 mt-3"},q,8,J)])):(n(),o("td",E,z)),e("td",null,[e("button",{type:"button",onClick:r=>t.showFactureModal(s),"data-toggle":"modal","data-target":".bd-Factureview-modal-lg",class:"btn btn-outline-primary mb-1 mt-3"},H,8,T)])])):p("",!0)]))),128))]),e("div",I,[a.factures.length>t.perPage?(n(),o("nav",G,[e("ul",K,[e("li",{class:d(["page-item",{disabled:t.currentPage===1}])},[e("button",{class:"page-link",onClick:i[0]||(i[0]=s=>t.currentPage=1),disabled:t.currentPage===1,"aria-label":"First"},W,8,Q)],2),e("li",{class:d(["page-item",{disabled:t.currentPage===1}])},[e("button",{class:"page-link",onClick:i[1]||(i[1]=s=>t.currentPage-=1),disabled:t.currentPage===1,"aria-label":"Previous"},x,8,X)],2),(n(!0),o(c,null,u(t.totalPages,s=>(n(),o("li",{class:d(["page-item",{active:t.currentPage===s}]),key:s},[e("button",{class:"page-link",onClick:r=>t.currentPage=s,disabled:t.currentPage===s},l(s),9,ee)],2))),128)),e("li",{class:d(["page-item",{disabled:t.currentPage===t.totalPages}])},[e("button",{class:"page-link",onClick:i[2]||(i[2]=s=>t.currentPage+=1),disabled:t.currentPage===t.totalPages,"aria-label":"Next"},ne,8,te)],2),e("li",{class:d(["page-item",{disabled:t.currentPage===t.totalPages}])},[e("button",{class:"page-link",onClick:i[3]||(i[3]=s=>t.currentPage=t.totalPages),disabled:t.currentPage===t.totalPages,"aria-label":"Last"},re,8,oe)],2)])])):p("",!0)])]),h(b,{patient:a.patient,facture:t.selectedFacture,onClose:i[4]||(i[4]=s=>t.selectedFacture=null)},null,8,["patient","facture"]),h(m,{patient:a.patient,facture:t.selectedFacture,soins:a.soinsF},null,8,["patient","facture","soins"])])])])])])]))}});export{ve as default};
