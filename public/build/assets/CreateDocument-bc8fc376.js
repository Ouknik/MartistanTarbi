import{P as f,r,o as c,d,a as e,t as u,u as a,h as v,i as b,j as D,g as x,e as y,F,J as w}from"./app-e263ac0f.js";import{i as l}from"./index.min-40c7dc60.js";const T={hidden:""},A={class:"modal fade",tabindex:"-1",id:"AddDocument",role:"dialog",style:{display:"none"},"aria-hidden":"true"},C={class:"modal-dialog modal-lg"},N={class:"modal-content"},V=e("div",{class:"modal-header bg-secondary"},[e("h5",{class:"modal-title text-white"},"Ajouter Document "),e("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[e("span",{"aria-hidden":"true"},"×")])],-1),j={class:"modal-body"},B={class:"row"},S={class:"col-lg-4"},E={class:"form-group"},I=e("label",{for:"exampleInputText1"},"Nom Document ",-1),k={class:"col-lg-6"},P={class:"form-group"},z=e("label",{for:"exampleInputText1"},"Chemin du fichier ",-1),J={class:"custom-file"},M={class:"custom-file-label",for:"customFile"},R={class:"form-group"},U=["src"],L={class:"row"},O={class:"col-lg-6"},W={class:"form-group"},q={type:"submit",class:"btn mb-3 btn-primary"},G=["disabled"],Q={__name:"CreateDocument",props:{patient:Object},setup(m){const t=f({nomDocument:"",pathDocument:"",patient:""});let n=r(""),p=r("");const h=o=>{t.pathDocument=o;const s=new FileReader;s.readAsDataURL(o),s.onload=i=>{o.type.startsWith("image/")?n.value=i.target.result:o.type==="application/pdf"&&(p.value=i.target.result)}},_=o=>{const s=o.target.files[0];h(s),t.pathDocument=s},g=()=>{if(!t.pathDocument){l.useToast().error("Veuillez télécharger une image",{position:"bottom-right",duration:3e3});return}w.visit("/documents",{method:"post",data:t,preserveState:!0,preserveScroll:!0,errorBag:null,forceFormData:!0,onProgress:o=>{},onSuccess:o=>{$("#AddDocument").modal("hide"),l.useToast().success("Document Bien Ajouter",{position:"bottom-right",duration:3e3}),t.pathDocument=new File([],"")},onError:o=>{l.useToast().error("Veuillez remplir tout les champs",{position:"bottom-right",duration:3e3}),console.error("Erreur lors de la soumission du formulaire :",o)}})};return(o,s)=>(c(),d(F,null,[e("p",T,u(a(t).patient=m.patient),1),e("div",A,[e("div",C,[e("div",N,[e("form",{onSubmit:v(g,["prevent"])},[V,e("div",j,[e("div",B,[e("div",S,[e("div",E,[I,b(e("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=i=>a(t).nomDocument=i),class:"form-control",id:"exampleInputText1",placeholder:"Nom Document"},null,512),[[D,a(t).nomDocument]])])]),e("div",k,[e("div",P,[z,e("div",J,[e("input",{type:"file",name:"pathDocument",class:"custom-file-input",id:"customFile",onChange:_},null,32),e("label",M,u(a(t).pathDocument?a(t).pathDocument.name:"Choisir un document"),1)])]),e("div",R,[a(n).value?(c(),d("img",{key:0,src:a(n).value,alt:"Aperçu de l'image"},null,8,U)):x("",!0)])])]),e("div",L,[e("div",O,[e("div",W,[e("button",q,[e("i",{class:"ri-bill-fill",disabled:a(t).processing},null,8,G),y("Ajouter")])])])])])],32)])])])],64))}};export{Q as default};
