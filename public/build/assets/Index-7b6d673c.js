import{G as D,p as f,o as i,c as B,w as y,a as e,t as s,d as r,g as x,n as g,b as h,e as l,u as m,E as b,z as k,F as M,f as C}from"./app-e263ac0f.js";import{_ as L}from"./AppLayout-b3a276fd.js";import"./_plugin-vue_export-helper-c27b6911.js";const H={class:"py-6 sm:py-8"},N={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},V={class:"mb-6 sm:mb-8"},T={class:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-gray-100"},A={class:"mt-2 text-sm text-gray-600 dark:text-gray-400"},I={key:0,class:"mb-6"},O={key:0,class:"bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded"},E={class:"flex"},$=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})])],-1),F={class:"ml-3"},q={class:"text-sm text-yellow-700"},G={key:1,class:"bg-orange-50 border-l-4 border-orange-400 p-4 rounded"},J={class:"flex"},P=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-5 w-5 text-orange-400",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})])],-1),W={class:"ml-3"},K={class:"text-sm text-orange-700"},Q={key:2,class:"bg-red-50 border-l-4 border-red-400 p-4 rounded"},U={class:"flex"},X=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1),Y={class:"ml-3"},Z={class:"text-sm text-red-700"},tt={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},et={class:"lg:col-span-2 space-y-6"},st={class:"bg-white dark:bg-gray-800 shadow-sm rounded-lg overflow-hidden"},at={class:"bg-gradient-to-r from-indigo-500 to-purple-600 px-6 py-4"},nt={class:"text-xl font-semibold text-white"},it={key:0,class:"p-6"},rt={class:"flex items-center justify-between mb-4"},ot={class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},dt={class:"text-gray-600 dark:text-gray-400"},lt={class:"text-right"},ct={class:"border-t border-gray-200 dark:border-gray-700 pt-4 space-y-2"},gt={class:"flex justify-between text-sm"},ut={class:"text-gray-600 dark:text-gray-400"},yt={class:"font-medium text-gray-900 dark:text-gray-100"},xt={class:"flex justify-between text-sm"},ht={class:"text-gray-600 dark:text-gray-400"},mt={class:"mt-6 flex flex-col sm:flex-row gap-3"},bt={key:1,class:"p-6 text-center"},_t={class:"text-gray-500 dark:text-gray-400 mb-4"},pt={class:"bg-white dark:bg-gray-800 shadow-sm rounded-lg p-6"},vt={class:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4"},ft={class:"space-y-4"},kt={class:"flex justify-between text-sm mb-2"},wt={class:"text-gray-600 dark:text-gray-400"},St={class:"font-medium text-gray-900 dark:text-gray-100"},Rt={key:0},zt={key:1,class:"text-green-600"},jt={key:0,class:"w-full bg-gray-200 rounded-full h-2"},Dt={class:"flex justify-between text-sm mb-2"},Bt={class:"text-gray-600 dark:text-gray-400"},Mt={class:"font-medium text-gray-900 dark:text-gray-100"},Ct={key:0},Lt={key:1,class:"text-green-600"},Ht={key:0,class:"w-full bg-gray-200 rounded-full h-2"},Nt={class:"flex justify-between text-sm mb-2"},Vt={class:"text-gray-600 dark:text-gray-400"},Tt={class:"font-medium text-gray-900 dark:text-gray-100"},At={key:0},It={key:1,class:"text-green-600"},Ot={key:0,class:"w-full bg-gray-200 rounded-full h-2"},Et={class:"space-y-6"},$t={class:"bg-white dark:bg-gray-800 shadow-sm rounded-lg p-6"},Ft={class:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4"},qt={key:0,class:"space-y-3"},Gt={class:"text-sm font-medium text-gray-900 dark:text-gray-100"},Jt={class:"text-xs text-gray-500 dark:text-gray-400"},Pt={class:"text-xs"},Wt={key:1,class:"text-sm text-gray-500 dark:text-gray-400"},Kt={class:"bg-white dark:bg-gray-800 shadow-sm rounded-lg p-6"},Qt={class:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4"},Ut={class:"space-y-2"},Xt={href:"#",class:"block px-4 py-2 text-sm text-indigo-600 hover:bg-indigo-50 dark:hover:bg-gray-700 rounded transition"},ee={__name:"Index",props:{currentSubscription:Object,subscriptionHistory:Array,availablePlans:Array,usageStats:Object,daysRemaining:Number,isInTrial:Boolean,trialDaysRemaining:Number,tenant:Object},setup(a){const S=D(),n=(o,p={})=>{let u=(S.props.translations||{})[o]||o;return Object.keys(p).forEach(d=>{u=u.replace(`:${d}`,p[d])}),u},c=a,R=f(()=>c.isInTrial&&c.trialDaysRemaining<=7||c.daysRemaining<=7),z=f(()=>{if(!c.currentSubscription)return"bg-gray-100 text-gray-800";const o=c.currentSubscription.status;return{active:"bg-green-100 text-green-800",expired:"bg-red-100 text-red-800",cancelled:"bg-gray-100 text-gray-800",pending:"bg-yellow-100 text-yellow-800"}[o]||"bg-gray-100 text-gray-800"}),j=f(()=>{if(!c.currentSubscription)return t("tenant.subscription_expired");const o=c.currentSubscription.status;return{active:t("superadmin.active"),expired:t("tenant.subscription_expired"),cancelled:t("superadmin.cancelled"),pending:t("tenant.pending")}[o]||o}),_=o=>o?new Date(o).toLocaleDateString("ar-MA",{year:"numeric",month:"long",day:"numeric"}):"-";return(o,p)=>(i(),B(L,{title:n("tenant.my_subscription")},{default:y(()=>{var v,u;return[e("div",H,[e("div",N,[e("div",V,[e("h1",T,s(n("tenant.my_subscription")),1),e("p",A,s(n("tenant.subscription_details")),1)]),R.value?(i(),r("div",I,[a.isInTrial&&a.trialDaysRemaining<=7?(i(),r("div",O,[e("div",E,[$,e("div",F,[e("p",q,s(n("tenant.alert_trial_ending",{days:a.trialDaysRemaining})),1)])])])):a.daysRemaining<=7&&a.daysRemaining>0?(i(),r("div",G,[e("div",J,[P,e("div",W,[e("p",K,s(n("tenant.alert_subscription_ending",{days:a.daysRemaining})),1)])])])):a.daysRemaining<=0?(i(),r("div",Q,[e("div",U,[X,e("div",Y,[e("p",Z,s(n("tenant.alert_subscription_expired")),1)])])])):x("",!0)])):x("",!0),e("div",tt,[e("div",et,[e("div",st,[e("div",at,[e("h2",nt,s(n("tenant.current_plan")),1)]),a.currentSubscription?(i(),r("div",it,[e("div",rt,[e("div",null,[e("h3",ot,s((v=a.currentSubscription.plan)==null?void 0:v.name),1),e("p",dt,s((u=a.currentSubscription.amount)==null?void 0:u.toLocaleString())+" MAD "+s(n("tenant.per_month")),1)]),e("div",lt,[e("span",{class:g([z.value,"px-3 py-1 rounded-full text-xs font-semibold"])},s(j.value),3)])]),e("div",ct,[e("div",gt,[e("span",ut,s(n("tenant.subscription_expires")),1),e("span",yt,s(_(a.currentSubscription.ends_at)),1)]),e("div",xt,[e("span",ht,s(n("tenant.days_remaining")),1),e("span",{class:g(["font-medium",a.daysRemaining<=7?"text-red-600":"text-gray-900 dark:text-gray-100"])},s(a.daysRemaining)+" "+s(n("tenant.days_remaining")),3)])]),e("div",mt,[h(m(b),{href:o.route("subscription.plans"),class:"flex-1 bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg text-center font-medium transition"},{default:y(()=>[l(s(n("tenant.upgrade_plan")),1)]),_:1},8,["href"]),h(m(b),{href:o.route("subscription.invoices"),class:"flex-1 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 px-4 py-2 rounded-lg text-center font-medium transition"},{default:y(()=>[l(s(n("tenant.invoices")),1)]),_:1},8,["href"])])])):(i(),r("div",bt,[e("p",_t,s(n("tenant.subscription_expired")),1),h(m(b),{href:o.route("subscription.plans"),class:"inline-block bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-2 rounded-lg font-medium transition"},{default:y(()=>[l(s(n("tenant.select_plan")),1)]),_:1},8,["href"])]))]),e("div",pt,[e("h3",vt,s(n("tenant.usage_statistics")),1),e("div",ft,[e("div",null,[e("div",kt,[e("span",wt,s(n("tenant.patients_usage")),1),e("span",St,[l(s(a.usageStats.patients.current)+" ",1),a.usageStats.patients.unlimited?(i(),r("span",zt," ("+s(n("tenant.unlimited"))+") ",1)):(i(),r("span",Rt," / "+s(a.usageStats.patients.limit),1))])]),a.usageStats.patients.unlimited?x("",!0):(i(),r("div",jt,[e("div",{class:g(["h-2 rounded-full transition-all",a.usageStats.patients.percentage>=90?"bg-red-500":a.usageStats.patients.percentage>=70?"bg-yellow-500":"bg-green-500"]),style:k({width:a.usageStats.patients.percentage+"%"})},null,6)]))]),e("div",null,[e("div",Dt,[e("span",Bt,s(n("tenant.doctors_usage")),1),e("span",Mt,[l(s(a.usageStats.doctors.current)+" ",1),a.usageStats.doctors.unlimited?(i(),r("span",Lt," ("+s(n("tenant.unlimited"))+") ",1)):(i(),r("span",Ct," / "+s(a.usageStats.doctors.limit),1))])]),a.usageStats.doctors.unlimited?x("",!0):(i(),r("div",Ht,[e("div",{class:g(["h-2 rounded-full transition-all",a.usageStats.doctors.percentage>=90?"bg-red-500":a.usageStats.doctors.percentage>=70?"bg-yellow-500":"bg-green-500"]),style:k({width:a.usageStats.doctors.percentage+"%"})},null,6)]))]),e("div",null,[e("div",Nt,[e("span",Vt,s(n("tenant.storage_usage")),1),e("span",Tt,[l(s(a.usageStats.storage.current)+" "+s(n("tenant.mb"))+" ",1),a.usageStats.storage.unlimited?(i(),r("span",It," ("+s(n("tenant.unlimited"))+") ",1)):(i(),r("span",At," / "+s(a.usageStats.storage.limit)+" "+s(n("tenant.mb")),1))])]),a.usageStats.storage.unlimited?x("",!0):(i(),r("div",Ot,[e("div",{class:g(["h-2 rounded-full transition-all",a.usageStats.storage.percentage>=90?"bg-red-500":a.usageStats.storage.percentage>=70?"bg-yellow-500":"bg-green-500"]),style:k({width:a.usageStats.storage.percentage+"%"})},null,6)]))])])])]),e("div",Et,[e("div",$t,[e("h3",Ft,s(n("superadmin.subscription_history")),1),a.subscriptionHistory&&a.subscriptionHistory.length>0?(i(),r("div",qt,[(i(!0),r(M,null,C(a.subscriptionHistory.slice(0,5),d=>{var w;return i(),r("div",{key:d.id,class:g(["border-l-4 pl-3 py-2",d.status==="active"?"border-green-500":"border-gray-300"])},[e("div",Gt,s((w=d.plan)==null?void 0:w.name),1),e("div",Jt,s(_(d.starts_at))+" - "+s(_(d.ends_at)),1),e("div",Pt,[e("span",{class:g(["px-2 py-0.5 rounded",d.status==="active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"])},s(d.status),3)])],2)}),128))])):(i(),r("p",Wt,s(n("superadmin.no_subscriptions")),1))]),e("div",Kt,[e("h3",Qt,s(n("common.quick_actions")),1),e("div",Ut,[h(m(b),{href:o.route("subscription.plans"),class:"block px-4 py-2 text-sm text-indigo-600 hover:bg-indigo-50 dark:hover:bg-gray-700 rounded transition"},{default:y(()=>[l(s(n("tenant.compare_plans")),1)]),_:1},8,["href"]),h(m(b),{href:o.route("subscription.invoices"),class:"block px-4 py-2 text-sm text-indigo-600 hover:bg-indigo-50 dark:hover:bg-gray-700 rounded transition"},{default:y(()=>[l(s(n("tenant.view_invoice")),1)]),_:1},8,["href"]),e("a",Xt,s(n("tenant.contact_support")),1)])])])])])])]}),_:1},8,["title"]))}};export{ee as default};
