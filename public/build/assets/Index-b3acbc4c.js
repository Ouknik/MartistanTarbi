import{r as y,y as K,o as i,d as l,b,u as s,X as Q,w as J,a as e,t as a,i as v,j as W,v as O,F as h,f as w,n as d,E as z,e as Y,g as _,c as Z,J as k}from"./app-e263ac0f.js";import{u as ee,_ as te}from"./SuperAdminLayout-931e23d9.js";const se={class:"mb-6"},ae={class:"text-gray-500"},ne={class:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6"},oe={class:"bg-white rounded-xl shadow-sm p-4"},re={class:"text-sm text-gray-500"},ie={class:"text-2xl font-bold text-gray-800"},le={class:"bg-green-50 rounded-xl shadow-sm p-4"},de={class:"text-sm text-green-600"},ce={class:"text-2xl font-bold text-green-800"},ue={class:"bg-yellow-50 rounded-xl shadow-sm p-4"},pe={class:"text-sm text-yellow-600"},xe={class:"text-2xl font-bold text-yellow-800"},ge={class:"bg-red-50 rounded-xl shadow-sm p-4"},me={class:"text-sm text-red-600"},he={class:"text-2xl font-bold text-red-800"},_e={class:"bg-white rounded-xl shadow-sm p-6 mb-6"},fe={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},ye={class:"block text-sm font-medium text-gray-700 mb-2"},be=["placeholder"],ve={class:"block text-sm font-medium text-gray-700 mb-2"},we={value:""},ke={value:"active"},Ce={value:"pending"},Se={value:"cancelled"},Me={value:"expired"},Be={class:"block text-sm font-medium text-gray-700 mb-2"},Le={value:""},Ve=["value"],je={class:"bg-white rounded-xl shadow-sm overflow-hidden"},Te={class:"overflow-x-auto"},De={class:"w-full"},Ae={class:"bg-gray-50"},Fe={class:"bg-white divide-y divide-gray-200"},He={class:"px-6 py-4 whitespace-nowrap"},Ne={class:"px-6 py-4 whitespace-nowrap"},Ue={class:"px-6 py-4 whitespace-nowrap text-sm"},Ee={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},$e={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Ie={class:"px-6 py-4 whitespace-nowrap"},Je={class:"px-6 py-4 whitespace-nowrap text-sm"},Oe={class:"flex items-center gap-2"},ze=["onClick","title"],Pe=e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),Re=[Pe],Xe=["onClick","title"],qe=e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),Ge=[qe],Ke={key:0},Qe={colspan:"7",class:"px-6 py-8 text-center text-gray-500"},We={key:0,class:"px-6 py-4 border-t border-gray-200"},Ye={class:"flex items-center justify-between"},Ze={class:"text-sm text-gray-500"},et={class:"flex gap-1"},at={__name:"Index",props:{subscriptions:Object,plans:Array,filters:Object},setup(o){var M,B,L;const{t:n,isRtl:u,currentLocale:C}=ee(),f=o,p=y(((M=f.filters)==null?void 0:M.search)||""),x=y(((B=f.filters)==null?void 0:B.status)||""),g=y(((L=f.filters)==null?void 0:L.plan_id)||""),P=()=>{k.get(route("superadmin.subscriptions.index"),{search:p.value,status:x.value,plan_id:g.value},{preserveState:!0,replace:!0})};K([p,x,g],()=>{P()},{debounce:300});const R=r=>{confirm(n("superadmin.confirm_cancel_subscription"))&&k.post(route("superadmin.subscriptions.cancel",r.id))},X=r=>{k.post(route("superadmin.subscriptions.renew",r.id))},q=r=>{switch(r){case"active":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";case"expired":return"bg-gray-100 text-gray-800";case"pending":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},G=r=>{switch(r){case"active":return n("superadmin.active");case"cancelled":return n("superadmin.cancelled");case"expired":return n("superadmin.expired");case"pending":return n("superadmin.pending");default:return r}},S=r=>{const c=C.value==="ar"?"ar-MA":C.value==="fr"?"fr-MA":"en-US";return new Date(r).toLocaleDateString(c)};return(r,c)=>(i(),l(h,null,[b(s(Q),{title:s(n)("superadmin.manage_subscriptions")},null,8,["title"]),b(te,{title:s(n)("superadmin.manage_subscriptions")},{default:J(()=>{var V,j,T,D,A;return[e("div",se,[e("p",ae,a(s(n)("superadmin.manage_subscriptions_desc")),1)]),e("div",ne,[e("div",oe,[e("p",re,a(s(n)("superadmin.total_subscriptions")),1),e("p",ie,a(o.subscriptions.total||0),1)]),e("div",le,[e("p",de,a(s(n)("superadmin.active")),1),e("p",ce,a(((V=o.subscriptions.data)==null?void 0:V.filter(t=>t.status==="active").length)||0),1)]),e("div",ue,[e("p",pe,a(s(n)("superadmin.pending")),1),e("p",xe,a(((j=o.subscriptions.data)==null?void 0:j.filter(t=>t.status==="pending").length)||0),1)]),e("div",ge,[e("p",me,a(s(n)("superadmin.cancelled")),1),e("p",he,a(((T=o.subscriptions.data)==null?void 0:T.filter(t=>t.status==="cancelled").length)||0),1)])]),e("div",_e,[e("div",fe,[e("div",null,[e("label",ye,a(s(n)("superadmin.search")),1),v(e("input",{"onUpdate:modelValue":c[0]||(c[0]=t=>p.value=t),type:"text",placeholder:s(n)("superadmin.search_placeholder"),class:"block w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},null,8,be),[[W,p.value]])]),e("div",null,[e("label",ve,a(s(n)("superadmin.status")),1),v(e("select",{"onUpdate:modelValue":c[1]||(c[1]=t=>x.value=t),class:"block w-full py-2 px-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},[e("option",we,a(s(n)("superadmin.all")),1),e("option",ke,a(s(n)("superadmin.active")),1),e("option",Ce,a(s(n)("superadmin.pending")),1),e("option",Se,a(s(n)("superadmin.cancelled")),1),e("option",Me,a(s(n)("superadmin.expired")),1)],512),[[O,x.value]])]),e("div",null,[e("label",Be,a(s(n)("superadmin.plan")),1),v(e("select",{"onUpdate:modelValue":c[2]||(c[2]=t=>g.value=t),class:"block w-full py-2 px-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},[e("option",Le,a(s(n)("superadmin.all")),1),(i(!0),l(h,null,w(o.plans,t=>(i(),l("option",{key:t.id,value:t.id},a(t.name),9,Ve))),128))],512),[[O,g.value]])])])]),e("div",je,[e("div",Te,[e("table",De,[e("thead",Ae,[e("tr",null,[e("th",{class:d(["px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",s(u)?"text-right":"text-left"])},a(s(n)("superadmin.clinic")),3),e("th",{class:d(["px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",s(u)?"text-right":"text-left"])},a(s(n)("superadmin.plan")),3),e("th",{class:d(["px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",s(u)?"text-right":"text-left"])},a(s(n)("superadmin.amount")),3),e("th",{class:d(["px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",s(u)?"text-right":"text-left"])},a(s(n)("superadmin.start_date")),3),e("th",{class:d(["px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",s(u)?"text-right":"text-left"])},a(s(n)("superadmin.end_date")),3),e("th",{class:d(["px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",s(u)?"text-right":"text-left"])},a(s(n)("superadmin.status")),3),e("th",{class:d(["px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",s(u)?"text-right":"text-left"])},a(s(n)("superadmin.actions")),3)])]),e("tbody",Fe,[(i(!0),l(h,null,w(o.subscriptions.data,t=>{var F,H,N,U,E,$;return i(),l("tr",{key:t.id,class:"hover:bg-gray-50"},[e("td",He,[b(s(z),{href:r.route("superadmin.tenants.show",t.tenant_id),class:"text-indigo-600 hover:text-indigo-800"},{default:J(()=>{var m,I;return[Y(a(((I=(m=t.tenant)==null?void 0:m.data)==null?void 0:I.name)||t.tenant_id),1)]}),_:2},1032,["href"])]),e("td",Ne,[e("span",{class:d(["px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full",{"bg-gray-100 text-gray-800":((F=t.plan)==null?void 0:F.name)==="Free","bg-blue-100 text-blue-800":((H=t.plan)==null?void 0:H.name)==="Basic","bg-purple-100 text-purple-800":((N=t.plan)==null?void 0:N.name)==="Pro","bg-yellow-100 text-yellow-800":((U=t.plan)==null?void 0:U.name)==="Enterprise"}])},a((E=t.plan)==null?void 0:E.name),3)]),e("td",Ue,a((($=t.amount)==null?void 0:$.toLocaleString())||0)+" "+a(s(n)("superadmin.currency")),1),e("td",Ee,a(S(t.starts_at)),1),e("td",$e,a(S(t.ends_at)),1),e("td",Ie,[e("span",{class:d(["px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full",q(t.status)])},a(G(t.status)),3)]),e("td",Je,[e("div",Oe,[t.status==="active"?(i(),l("button",{key:0,onClick:m=>R(t),class:"text-red-600 hover:text-red-900",title:s(n)("superadmin.cancel")},Re,8,ze)):_("",!0),["cancelled","expired"].includes(t.status)?(i(),l("button",{key:1,onClick:m=>X(t),class:"text-green-600 hover:text-green-900",title:s(n)("superadmin.renew")},Ge,8,Xe)):_("",!0)])])])}),128)),(D=o.subscriptions.data)!=null&&D.length?_("",!0):(i(),l("tr",Ke,[e("td",Qe,a(s(n)("superadmin.no_subscriptions")),1)]))])])]),((A=o.subscriptions.links)==null?void 0:A.length)>3?(i(),l("div",We,[e("div",Ye,[e("div",Ze,a(s(n)("superadmin.showing_results",{from:o.subscriptions.from,to:o.subscriptions.to,total:o.subscriptions.total})),1),e("div",et,[(i(!0),l(h,null,w(o.subscriptions.links,t=>(i(),Z(s(z),{key:t.label,href:t.url,class:d(["px-3 py-2 text-sm rounded-lg",t.active?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200",!t.url&&"opacity-50 cursor-not-allowed"]),innerHTML:t.label,disabled:!t.url},null,8,["href","class","innerHTML","disabled"]))),128))])])])):_("",!0)])]}),_:1},8,["title"])],64))}};export{at as default};
