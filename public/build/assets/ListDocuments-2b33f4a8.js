import{o,d as n,a as e,F as r,f as u,t as d,n as l,g as h,J as g}from"./app-e263ac0f.js";import"./main-ed727b8e.js";import{i as m}from"./index.min-40c7dc60.js";const p={class:"tab-pane fade show",id:"pills-documents-fill",role:"tabpanel","aria-labelledby":"pills-documents-tab-fill"},b=e("div",{class:"text-right"},null,-1),_=e("div",{class:"text-right"},[e("div",{class:"dropdown"},[e("button",{class:"btn btn-outline-primary",type:"button",id:"dropdownMenuButton","data-toggle":"modal","data-target":"#AddDocument","aria-haspopup":"true","aria-expanded":"false"}," Ajouter un Document ")])],-1),v={class:"row"},P={class:"col-sm-12"},f={class:"iq-card"},k={class:"iq-card-body"},y={key:0,id:"table",class:"table-editable"},D={class:"table table-bordered table-responsive-md table-striped text-center"},w=e("thead",null,[e("tr",null,[e("th",null,"N°"),e("th",null,"Nom Document"),e("th",null,"Date"),e("th",null,"Aperçu"),e("th",null,"Supprimer"),e("th",null,"Visualiser")])],-1),C={contenteditable:"false"},L={contenteditable:"false"},I={contenteditable:"false"},$=["src","onClick"],j=["data"],M=["onClick"],S=e("i",{class:"ri-delete-bin-6-line"},null,-1),B=[S],N=["href"],V=["href"],W={class:"d-flex justify-content-center"},A={key:0,"aria-label":"Documents pagination"},F={class:"pagination"},O=["disabled"],q=e("span",{"aria-hidden":"true"},"«",-1),E=e("span",{class:"sr-only"},"First",-1),J=[q,E],z=["disabled"],G=e("span",{"aria-hidden":"true"},"‹",-1),T=e("span",{class:"sr-only"},"Previous",-1),H=[G,T],K=["onClick","disabled"],Q=["disabled"],R=e("span",{"aria-hidden":"true"},"›",-1),U=e("span",{class:"sr-only"},"Next",-1),X=[R,U],Y=["disabled"],Z=e("span",{"aria-hidden":"true"},"»",-1),x=e("span",{class:"sr-only"},"Last",-1),ee=[Z,x],te={class:"modal fade",ref:"imageModal",tabindex:"-1","aria-labelledby":"imageModalLabel","aria-hidden":"true"},se={class:"modal-dialog modal-dialog-centered large-modal"},ae={class:"modal-content",ref:"modalContent"},oe=e("div",{class:"modal-header"},[e("h5",{class:"modal-title",id:"imageModalLabel"},"Aperçu de l'image"),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),ne={class:"modal-body"},ie=["src"],le={components:{},props:["data","errors"],data(){return{selectedImage:"",perPage:4,currentPage:1}},computed:{paginatedDocuments(){const a=(this.currentPage-1)*this.perPage,t=a+this.perPage;return this.documents.slice(a,t)},totalPages(){return Math.ceil(this.documents.length/this.perPage)}},methods:{isImage(a){return a.toLowerCase().endsWith(".jpg")||a.toLowerCase().endsWith(".jpeg")||a.toLowerCase().endsWith(".png")||a.toLowerCase().endsWith(".gif")||a.toLowerCase().endsWith(".svg")},getDocuments(){g.get("/documents",data.documents,{preserveState:!0,preserveScroll:!0})},formatDate(a){return new Date(a).toLocaleDateString("en-GB")},async showImage(a){this.selectedImage="/"+a.pathDocument;const t=new Image;t.src=this.selectedImage,await new Promise(s=>{t.onload=()=>s()}),this.$refs.modalContent.style.width=`${t.width}px`,new bootstrap.Modal(this.$refs.imageModal).show()},deleteDocument(a){g.delete(`/documents/${a.id}`,{preserveState:!0,preserveScroll:!0,onSuccess:t=>{m.useToast().success("Bien Supprimer",{position:"bottom-right",duration:3e3})}})}}},ue=Object.assign(le,{__name:"ListDocuments",props:{documents:Object,patient:Object},setup(a){return(t,i)=>(o(),n(r,null,[e("div",p,[b,_,e("div",v,[e("div",P,[e("div",f,[e("div",k,[a.documents.length>0?(o(),n("div",y,[e("table",D,[w,e("tbody",null,[(o(!0),n(r,null,u(t.paginatedDocuments,s=>(o(),n("tr",{key:s.id},[e("td",C,d(s.id),1),e("td",L,d(s.nomDocument),1),e("td",I,d(t.formatDate(s.created_at)),1),e("td",null,[t.isImage(s.pathDocument)?(o(),n("img",{key:0,src:"/"+s.pathDocument,class:"object-cover h-40 w-80",width:"200",height:"200",onClick:c=>t.showImage(s)},null,8,$)):(o(),n("object",{key:1,data:"/"+s.pathDocument,type:"application/pdf",width:"200",height:"200"},null,8,j))]),e("td",null,[e("button",{onClick:c=>t.deleteDocument(s),type:"button",class:"btn btn-outline-danger mb-1 mt-3"},B,8,M)]),e("td",null,[t.isImage(s.pathDocument)?(o(),n("a",{key:0,href:"/"+s.pathDocument,target:"_blank"},"Visualiser",8,N)):(o(),n("a",{key:1,href:"/"+s.pathDocument,target:"_blank"},"Visualiser",8,V))])]))),128))])]),e("div",W,[a.documents.length>t.perPage?(o(),n("nav",A,[e("ul",F,[e("li",{class:l(["page-item",{disabled:t.currentPage===1}])},[e("button",{class:"page-link",onClick:i[0]||(i[0]=s=>t.currentPage=1),disabled:t.currentPage===1,"aria-label":"First"},J,8,O)],2),e("li",{class:l(["page-item",{disabled:t.currentPage===1}])},[e("button",{class:"page-link",onClick:i[1]||(i[1]=s=>t.currentPage-=1),disabled:t.currentPage===1,"aria-label":"Previous"},H,8,z)],2),(o(!0),n(r,null,u(t.totalPages,s=>(o(),n("li",{class:l(["page-item",{active:t.currentPage===s}]),key:s},[e("button",{class:"page-link",onClick:c=>t.currentPage=s,disabled:t.currentPage===s},d(s),9,K)],2))),128)),e("li",{class:l(["page-item",{disabled:t.currentPage===t.totalPages}])},[e("button",{class:"page-link",onClick:i[2]||(i[2]=s=>t.currentPage+=1),disabled:t.currentPage===t.totalPages,"aria-label":"Next"},X,8,Q)],2),e("li",{class:l(["page-item",{disabled:t.currentPage===t.totalPages}])},[e("button",{class:"page-link",onClick:i[3]||(i[3]=s=>t.currentPage=t.totalPages),disabled:t.currentPage===t.totalPages,"aria-label":"Last"},ee,8,Y)],2)])])):h("",!0)])])):h("",!0)])])])])]),e("div",te,[e("div",se,[e("div",ae,[oe,e("div",ne,[e("img",{src:t.selectedImage,class:"img-fluid",alt:"Image preview"},null,8,ie)])],512)])],512)],64))}});export{ue as default};
